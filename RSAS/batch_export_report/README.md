## 使用

> 默认创建 html、doc、xls三种文件格式导出任务，并下载3种格式的报告

使用方法：

1. config.ini 文件添加相关信息
2. 从资产中提取创建任务有两种，选其一即可，都需要在对应脚本中添加文件路径
   - exportJSON.py 最开始的提取文件方式，评估任务导出
   - webtask_from_xls.py 提取web扫描任务，需要两个文件（企业信息表，域名对应 site 表）
3. 确定报告下载路径，手动创建 report 目录
4. 运行

**注意**

main方法中，`createTask()`中的 task_id 手动输入任务编号，写了根据起始编号自动生成（taskNum=122-132），但有时候导入任务时会失败，可能导致编号不连续。任务编号不存在时，后端返回500，调试好久tmd。

`task_info.json`文件是创建任务后生成，记录创建的任务名称、编号、导出的 IP 等。有时候导出任务会卡死在 0%，下载任务会一直等待下载，`Ctrl + C`停掉后，从头开始很烦，一般也只有几个任务在0%。避免重新创建重复任务，手动停止运行脚本，删除 json中下载好了的任务和 0%的任务（记录下），把后续的任务下载了，重新创建0%的任务。

在运行一次后，想重新创建导出任务，记得**删除`task_info.json`**

## 待完成

1. 导出任务创建完成后，检测每个导出任务是否完成，更新`task_info.json`中任务的创建状态，创建失败的任务重新创建并更新`report_ip`。再重复检测创建状态，递归？？我目前就手动改 json，
2. 下载完成过后，自动检测下载的压缩包文件是否损坏，损坏的重新创建下载。

估计不会写了。

